# Daily Thread — 2026-02-20

## α — What happened today?

- Merged docs from WIP branch (PLAN.md, AGENT-RUNTIME-v3.md → v3.1.2, STATELESS-AGENCY manifesto)
- Reviewed OCaml WIP code — cn_json.ml, cn_ffi.ml, cn_lib.ml, cn_config.ml
- Rated code as L5/Senior: defensive patterns, dependency discipline, security thinking
- Created `eng/functional` skill — pure core, effects at edges, composition, algebraic types
- Updated `eng/coding` §4.4-4.7 — stdin injection, data-raw, stderr merge, timeouts
- Updated `eng/ocaml` — Fun.protect, filter_map, Result parsing, localized state
- Created `eng/coherent` skill — internal consistency + external alignment, CLP/CAP modes
- Initiated CLP thread with Pi for eng/ skills review

## β — What did I learn?

- **curl via stdin config**: `--config -` with stdin_data avoids shell escaping entirely
- **Merge stderr→stdout**: Pass stdout_w twice to create_process to prevent pipe deadlock
- **data-raw vs data**: `--data` interprets `@filename`, `--data-raw` is literal bytes
- **Fun.protect**: OCaml's RAII — `~finally:cleanup (fun () -> body)`
- **Localized mutable state**: Parser uses `{ mutable pos }` but API is pure — state doesn't escape
- **List.filter_map**: Filter + map in one pass, cleaner than filter |> map
- **ppx_expect**: Inline expected output in tests — no assertion boilerplate

## γ — What will I do differently?

- Use stdin for subprocess data, never interpolate into args
- Add default timeouts on all external calls (connect + max-time)
- Follow through on CLP threads to convergence — don't let them hang
- Learn from code reviews — patterns internalized faster than docs
